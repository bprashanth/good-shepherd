{
  "computed_variables": [
    {
      "name": "cestrum_mature_count",
      "description": "Count of mature Cestrum aurantiacum individuals per observation, based on presence of a DBH measurement.",
      "inputs": [
        "spp_name_local_name",
        "dbh_in_cms"
      ],
      "english_intent": "If the species name indicates it is Cestrum aurantiacum (using common or local names like 'kisloar') and it has a DBH measurement, count the number of individuals. Multiple DBH entries for a single record (e.g., '4.2+3.4') are counted as multiple individuals. Otherwise, the count is 0.",
      "compiled": {
        "language": "js",
        "code": "const name = data.spp_name_local_name || ''; const lowerName = name.toLowerCase(); const is_cestrum = lowerName.includes('cestrum') || lowerName.includes('kage kisloar') || lowerName.includes('kisloar'); if (is_cestrum) { const dbh = data.dbh_in_cms; if (dbh && typeof dbh === 'string' && dbh.trim() !== '') { return dbh.split('+').length; } } return 0;"
      },
      "aggregation": {
        "level": "plot",
        "time": "per_survey_event"
      },
      "evidence": [
        {
          "source_type": "pdf",
          "source_ref": "Page 1",
          "snippet": "Plot Categorization. Based on field observations, plots are categorized by the density of C. aurantiacum individuals as follows: Low: 0 mature individuals..."
        }
      ],
      "status": "approved"
    },
    {
      "name": "cestrum_seedling_count",
      "description": "Count of Cestrum aurantiacum seedlings per observation.",
      "inputs": [
        "spp_name_local_name",
        "number_seedlings"
      ],
      "english_intent": "If the species is Cestrum aurantiacum (using common or local names like 'kisloar'), return the number of seedlings. Otherwise return 0.",
      "compiled": {
        "language": "jsonlogic",
        "code": "{\"if\": [{\"or\": [{\"in\": [\"cestrum\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}, {\"in\": [\"kage kisloar\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}, {\"in\": [\"kisloar\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}]}, {\"+\": [{\"var\": \"number_seedlings\"}]}, 0]}"
      },
      "aggregation": {
        "level": "plot",
        "time": "per_survey_event"
      },
      "evidence": [
        {
          "source_type": "pdf",
          "source_ref": "Page 1",
          "snippet": "Low: 0 mature individuals, but with presence of seedlings/saplings"
        }
      ],
      "status": "approved"
    },
    {
      "name": "cestrum_sapling_count",
      "description": "Count of Cestrum aurantiacum saplings per observation.",
      "inputs": [
        "spp_name_local_name",
        "number_saplings"
      ],
      "english_intent": "If the species is Cestrum aurantiacum (using common or local names like 'kisloar'), return the number of saplings. Otherwise return 0.",
      "compiled": {
        "language": "jsonlogic",
        "code": "{\"if\": [{\"or\": [{\"in\": [\"cestrum\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}, {\"in\": [\"kage kisloar\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}, {\"in\": [\"kisloar\", {\"lowercase\": {\"var\": \"spp_name_local_name\"}}]}]}, {\"+\": [{\"var\": \"number_saplings\"}]}, 0]}"
      },
      "aggregation": {
        "level": "plot",
        "time": "per_survey_event"
      },
      "evidence": [
        {
          "source_type": "pdf",
          "source_ref": "Page 1",
          "snippet": "Low: 0 mature individuals, but with presence of seedlings/saplings"
        }
      ],
      "status": "approved"
    },
    {
      "name": "species_name",
      "description": "Provides the species name for richness calculations.",
      "inputs": [
        "spp_name_local_name"
      ],
      "english_intent": "Return the species name.",
      "compiled": {
        "language": "jsonlogic",
        "code": "{\"var\": \"spp_name_local_name\"}"
      },
      "aggregation": {
        "level": "plot",
        "time": "per_survey_event"
      },
      "evidence": [
        {
          "source_type": "pdf",
          "source_ref": "Page 3",
          "snippet": "Biodiversity Gains Increase in species richness"
        }
      ],
      "status": "approved"
    }
  ]
}